{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport propTypes from '@dhis2/prop-types';\nimport { sharedPropTypes } from '@dhis2/ui-constants';\nimport React, { Component } from 'react';\nimport { debounce } from './debounce';\nimport { InputWrapper } from './InputWrapper.js';\nimport { MenuWrapper } from './MenuWrapper.js'; // Keycodes for the keypress event handlers\n\nconst ESCAPE_KEY = 27;\nconst SPACE_KEY = 32;\nconst UP_KEY = 38;\nconst DOWN_KEY = 40;\nexport class Select extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      open: false,\n      menuWidth: 'auto'\n    });\n\n    _defineProperty(this, \"selectRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(this, \"inputRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(this, \"onResize\", debounce(() => {\n      const menuWidth = this.getMenuWidth();\n\n      if (this.state.menuWidth !== menuWidth) {\n        this.setState({\n          menuWidth\n        });\n      }\n    }, 50));\n\n    _defineProperty(this, \"handleFocusInput\", () => {\n      this.inputRef.current.focus();\n    });\n\n    _defineProperty(this, \"onFocus\", e => {\n      const {\n        onFocus,\n        disabled,\n        selected\n      } = this.props;\n\n      if (disabled || !onFocus) {\n        return;\n      }\n\n      onFocus({\n        selected\n      }, e);\n    });\n\n    _defineProperty(this, \"handleOpen\", () => {\n      this.setState({\n        open: true,\n        menuWidth: this.getMenuWidth()\n      });\n    });\n\n    _defineProperty(this, \"handleClose\", () => {\n      this.setState({\n        open: false\n      });\n    });\n\n    _defineProperty(this, \"onToggle\", e => {\n      if (this.props.disabled) {\n        return;\n      }\n\n      e.stopPropagation();\n      this.state.open ? this.handleClose() : this.handleOpen();\n    });\n\n    _defineProperty(this, \"onOutsideClick\", e => {\n      const {\n        onBlur,\n        disabled,\n        selected\n      } = this.props;\n\n      if (disabled) {\n        return;\n      }\n\n      this.handleClose();\n\n      if (onBlur) {\n        onBlur({\n          selected\n        }, e);\n      }\n    });\n\n    _defineProperty(this, \"onKeyDown\", e => {\n      if (this.props.disabled) {\n        return;\n      }\n\n      e.stopPropagation();\n      const {\n        open\n      } = this.state;\n      const {\n        keyCode\n      } = e;\n      const shouldOpen = !open && (keyCode === SPACE_KEY || keyCode === UP_KEY || keyCode === DOWN_KEY);\n      const shouldClose = open && keyCode === ESCAPE_KEY;\n\n      if (shouldClose) {\n        return this.handleClose();\n      }\n\n      if (shouldOpen) {\n        return this.handleOpen();\n      }\n    });\n  }\n\n  componentDidMount() {\n    if (this.props.initialFocus) {\n      this.inputRef.current.focus();\n    }\n\n    this.setState({\n      menuWidth: this.getMenuWidth()\n    });\n    window.addEventListener('resize', this.onResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize);\n  }\n  /**\n   * We're debouncing this so it doesn't fire continually during a resize.\n   *\n   * Additionally we should use requestPostAnimationFrame to not trigger a forced\n   * layout, but that's just a proposal, and the added complexity of solving this\n   * in another manner does not seem worth it, considering the minor perf penalty.\n   *\n   * See: https://nolanlawson.com/2018/09/25/accurately-measuring-layout-on-the-web\n   */\n\n\n  getMenuWidth() {\n    const {\n      offsetWidth\n    } = this.inputRef.current;\n    const {\n      menuWidth\n    } = this.state;\n\n    if (offsetWidth && \"\".concat(offsetWidth, \"px\") !== menuWidth) {\n      return \"\".concat(offsetWidth, \"px\");\n    }\n\n    return menuWidth;\n  }\n\n  render() {\n    const {\n      open,\n      menuWidth\n    } = this.state;\n    const {\n      children,\n      className,\n      selected,\n      onChange,\n      tabIndex,\n      maxHeight,\n      error,\n      warning,\n      valid,\n      disabled,\n      dense,\n      dataTest\n    } = this.props; // Create the input\n\n    const inputProps = {\n      selected,\n      onChange,\n      options: children,\n      disabled\n    };\n    const input = /*#__PURE__*/React.cloneElement(this.props.input, inputProps); // Create the menu\n\n    const menuProps = {\n      selected,\n      onChange,\n      options: children,\n      handleClose: this.handleClose,\n      handleFocusInput: this.handleFocusInput\n    };\n    const menu = /*#__PURE__*/React.cloneElement(this.props.menu, menuProps);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: className,\n      ref: this.selectRef,\n      onFocus: this.onFocus,\n      onKeyDown: this.onKeyDown,\n      \"data-test\": dataTest\n    }, /*#__PURE__*/React.createElement(InputWrapper, {\n      onToggle: this.onToggle,\n      inputRef: this.inputRef,\n      tabIndex: tabIndex,\n      error: error,\n      warning: warning,\n      valid: valid,\n      disabled: disabled,\n      dense: dense,\n      dataTest: \"\".concat(dataTest, \"-input\")\n    }, input), open && /*#__PURE__*/React.createElement(MenuWrapper, {\n      onClick: this.onOutsideClick,\n      maxHeight: maxHeight,\n      selectRef: this.selectRef,\n      menuWidth: menuWidth,\n      dataTest: \"\".concat(dataTest, \"-menu\")\n    }, menu));\n  }\n\n}\nSelect.defaultProps = {\n  dataTest: 'dhis2-uicore-select'\n};\nSelect.propTypes = {\n  input: propTypes.element.isRequired,\n  menu: propTypes.element.isRequired,\n  selected: propTypes.oneOfType([propTypes.string, propTypes.arrayOf(propTypes.string)]).isRequired,\n  children: propTypes.node,\n  className: propTypes.string,\n  dataTest: propTypes.string,\n  dense: propTypes.bool,\n  disabled: propTypes.bool,\n  error: sharedPropTypes.statusPropType,\n  initialFocus: propTypes.bool,\n  maxHeight: propTypes.string,\n  tabIndex: propTypes.string,\n  valid: sharedPropTypes.statusPropType,\n  warning: sharedPropTypes.statusPropType,\n  onBlur: propTypes.func,\n  onChange: propTypes.func,\n  onFocus: propTypes.func\n};","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/ui/node_modules/@dhis2/ui-core/build/es/Select/Select.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","propTypes","sharedPropTypes","React","Component","debounce","InputWrapper","MenuWrapper","ESCAPE_KEY","SPACE_KEY","UP_KEY","DOWN_KEY","Select","constructor","args","open","menuWidth","createRef","getMenuWidth","state","setState","inputRef","current","focus","e","onFocus","disabled","selected","props","stopPropagation","handleClose","handleOpen","onBlur","keyCode","shouldOpen","shouldClose","componentDidMount","initialFocus","window","addEventListener","onResize","componentWillUnmount","removeEventListener","offsetWidth","concat","render","children","className","onChange","tabIndex","maxHeight","error","warning","valid","dense","dataTest","inputProps","options","input","cloneElement","menuProps","handleFocusInput","menu","createElement","ref","selectRef","onKeyDown","onToggle","onClick","onOutsideClick","defaultProps","element","isRequired","oneOfType","string","arrayOf","node","bool","statusPropType","func"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport propTypes from '@dhis2/prop-types';\nimport { sharedPropTypes } from '@dhis2/ui-constants';\nimport React, { Component } from 'react';\nimport { debounce } from './debounce';\nimport { InputWrapper } from './InputWrapper.js';\nimport { MenuWrapper } from './MenuWrapper.js'; // Keycodes for the keypress event handlers\n\nconst ESCAPE_KEY = 27;\nconst SPACE_KEY = 32;\nconst UP_KEY = 38;\nconst DOWN_KEY = 40;\nexport class Select extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      open: false,\n      menuWidth: 'auto'\n    });\n\n    _defineProperty(this, \"selectRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(this, \"inputRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(this, \"onResize\", debounce(() => {\n      const menuWidth = this.getMenuWidth();\n\n      if (this.state.menuWidth !== menuWidth) {\n        this.setState({\n          menuWidth\n        });\n      }\n    }, 50));\n\n    _defineProperty(this, \"handleFocusInput\", () => {\n      this.inputRef.current.focus();\n    });\n\n    _defineProperty(this, \"onFocus\", e => {\n      const {\n        onFocus,\n        disabled,\n        selected\n      } = this.props;\n\n      if (disabled || !onFocus) {\n        return;\n      }\n\n      onFocus({\n        selected\n      }, e);\n    });\n\n    _defineProperty(this, \"handleOpen\", () => {\n      this.setState({\n        open: true,\n        menuWidth: this.getMenuWidth()\n      });\n    });\n\n    _defineProperty(this, \"handleClose\", () => {\n      this.setState({\n        open: false\n      });\n    });\n\n    _defineProperty(this, \"onToggle\", e => {\n      if (this.props.disabled) {\n        return;\n      }\n\n      e.stopPropagation();\n      this.state.open ? this.handleClose() : this.handleOpen();\n    });\n\n    _defineProperty(this, \"onOutsideClick\", e => {\n      const {\n        onBlur,\n        disabled,\n        selected\n      } = this.props;\n\n      if (disabled) {\n        return;\n      }\n\n      this.handleClose();\n\n      if (onBlur) {\n        onBlur({\n          selected\n        }, e);\n      }\n    });\n\n    _defineProperty(this, \"onKeyDown\", e => {\n      if (this.props.disabled) {\n        return;\n      }\n\n      e.stopPropagation();\n      const {\n        open\n      } = this.state;\n      const {\n        keyCode\n      } = e;\n      const shouldOpen = !open && (keyCode === SPACE_KEY || keyCode === UP_KEY || keyCode === DOWN_KEY);\n      const shouldClose = open && keyCode === ESCAPE_KEY;\n\n      if (shouldClose) {\n        return this.handleClose();\n      }\n\n      if (shouldOpen) {\n        return this.handleOpen();\n      }\n    });\n  }\n\n  componentDidMount() {\n    if (this.props.initialFocus) {\n      this.inputRef.current.focus();\n    }\n\n    this.setState({\n      menuWidth: this.getMenuWidth()\n    });\n    window.addEventListener('resize', this.onResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize);\n  }\n  /**\n   * We're debouncing this so it doesn't fire continually during a resize.\n   *\n   * Additionally we should use requestPostAnimationFrame to not trigger a forced\n   * layout, but that's just a proposal, and the added complexity of solving this\n   * in another manner does not seem worth it, considering the minor perf penalty.\n   *\n   * See: https://nolanlawson.com/2018/09/25/accurately-measuring-layout-on-the-web\n   */\n\n\n  getMenuWidth() {\n    const {\n      offsetWidth\n    } = this.inputRef.current;\n    const {\n      menuWidth\n    } = this.state;\n\n    if (offsetWidth && \"\".concat(offsetWidth, \"px\") !== menuWidth) {\n      return \"\".concat(offsetWidth, \"px\");\n    }\n\n    return menuWidth;\n  }\n\n  render() {\n    const {\n      open,\n      menuWidth\n    } = this.state;\n    const {\n      children,\n      className,\n      selected,\n      onChange,\n      tabIndex,\n      maxHeight,\n      error,\n      warning,\n      valid,\n      disabled,\n      dense,\n      dataTest\n    } = this.props; // Create the input\n\n    const inputProps = {\n      selected,\n      onChange,\n      options: children,\n      disabled\n    };\n    const input = /*#__PURE__*/React.cloneElement(this.props.input, inputProps); // Create the menu\n\n    const menuProps = {\n      selected,\n      onChange,\n      options: children,\n      handleClose: this.handleClose,\n      handleFocusInput: this.handleFocusInput\n    };\n    const menu = /*#__PURE__*/React.cloneElement(this.props.menu, menuProps);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: className,\n      ref: this.selectRef,\n      onFocus: this.onFocus,\n      onKeyDown: this.onKeyDown,\n      \"data-test\": dataTest\n    }, /*#__PURE__*/React.createElement(InputWrapper, {\n      onToggle: this.onToggle,\n      inputRef: this.inputRef,\n      tabIndex: tabIndex,\n      error: error,\n      warning: warning,\n      valid: valid,\n      disabled: disabled,\n      dense: dense,\n      dataTest: \"\".concat(dataTest, \"-input\")\n    }, input), open && /*#__PURE__*/React.createElement(MenuWrapper, {\n      onClick: this.onOutsideClick,\n      maxHeight: maxHeight,\n      selectRef: this.selectRef,\n      menuWidth: menuWidth,\n      dataTest: \"\".concat(dataTest, \"-menu\")\n    }, menu));\n  }\n\n}\nSelect.defaultProps = {\n  dataTest: 'dhis2-uicore-select'\n};\nSelect.propTypes = {\n  input: propTypes.element.isRequired,\n  menu: propTypes.element.isRequired,\n  selected: propTypes.oneOfType([propTypes.string, propTypes.arrayOf(propTypes.string)]).isRequired,\n  children: propTypes.node,\n  className: propTypes.string,\n  dataTest: propTypes.string,\n  dense: propTypes.bool,\n  disabled: propTypes.bool,\n  error: sharedPropTypes.statusPropType,\n  initialFocus: propTypes.bool,\n  maxHeight: propTypes.string,\n  tabIndex: propTypes.string,\n  valid: sharedPropTypes.statusPropType,\n  warning: sharedPropTypes.statusPropType,\n  onBlur: propTypes.func,\n  onChange: propTypes.func,\n  onFocus: propTypes.func\n};"]},"metadata":{},"sourceType":"module"}