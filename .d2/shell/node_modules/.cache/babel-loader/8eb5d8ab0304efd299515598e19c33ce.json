{"ast":null,"code":"import { useDataQuery } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useLocale } from '../utils/useLocale';\nimport { LoadingMask } from './LoadingMask';\nimport { LoginModal } from './LoginModal';\nconst settingsQuery = {\n  userSettings: {\n    resource: 'userSettings'\n  }\n};\nexport const AuthBoundary = ({\n  url,\n  children\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(settingsQuery);\n  const locale = useLocale(data && (data.userSettings.keyUiLocale || window.navigator.language));\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(LoginModal, {\n      url: url\n    });\n  }\n\n  if (loading || !locale) {\n    return /*#__PURE__*/React.createElement(LoadingMask, null);\n  }\n\n  return children;\n};\nAuthBoundary.propTypes = {\n  children: PropTypes.element,\n  url: PropTypes.string\n};","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/app-shell/node_modules/@dhis2/app-adapter/build/es/components/AuthBoundary.js"],"names":["useDataQuery","PropTypes","React","useLocale","LoadingMask","LoginModal","settingsQuery","userSettings","resource","AuthBoundary","url","children","loading","error","data","locale","keyUiLocale","window","navigator","language","createElement","propTypes","element","string"],"mappings":"AAAA,SAASA,YAAT,QAA6B,oBAA7B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,YAAY,EAAE;AACZC,IAAAA,QAAQ,EAAE;AADE;AADM,CAAtB;AAKA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAC3BC,EAAAA,GAD2B;AAE3BC,EAAAA;AAF2B,CAAD,KAGtB;AACJ,QAAM;AACJC,IAAAA,OADI;AAEJC,IAAAA,KAFI;AAGJC,IAAAA;AAHI,MAIFd,YAAY,CAACM,aAAD,CAJhB;AAKA,QAAMS,MAAM,GAAGZ,SAAS,CAACW,IAAI,KAAKA,IAAI,CAACP,YAAL,CAAkBS,WAAlB,IAAiCC,MAAM,CAACC,SAAP,CAAiBC,QAAvD,CAAL,CAAxB;;AAEA,MAAIN,KAAJ,EAAW;AACT,WAAO,aAAaX,KAAK,CAACkB,aAAN,CAAoBf,UAApB,EAAgC;AAClDK,MAAAA,GAAG,EAAEA;AAD6C,KAAhC,CAApB;AAGD;;AAED,MAAIE,OAAO,IAAI,CAACG,MAAhB,EAAwB;AACtB,WAAO,aAAab,KAAK,CAACkB,aAAN,CAAoBhB,WAApB,EAAiC,IAAjC,CAApB;AACD;;AAED,SAAOO,QAAP;AACD,CAtBM;AAuBPF,YAAY,CAACY,SAAb,GAAyB;AACvBV,EAAAA,QAAQ,EAAEV,SAAS,CAACqB,OADG;AAEvBZ,EAAAA,GAAG,EAAET,SAAS,CAACsB;AAFQ,CAAzB","sourcesContent":["import { useDataQuery } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useLocale } from '../utils/useLocale';\nimport { LoadingMask } from './LoadingMask';\nimport { LoginModal } from './LoginModal';\nconst settingsQuery = {\n  userSettings: {\n    resource: 'userSettings'\n  }\n};\nexport const AuthBoundary = ({\n  url,\n  children\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(settingsQuery);\n  const locale = useLocale(data && (data.userSettings.keyUiLocale || window.navigator.language));\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(LoginModal, {\n      url: url\n    });\n  }\n\n  if (loading || !locale) {\n    return /*#__PURE__*/React.createElement(LoadingMask, null);\n  }\n\n  return children;\n};\nAuthBoundary.propTypes = {\n  children: PropTypes.element,\n  url: PropTypes.string\n};"]},"metadata":{},"sourceType":"module"}