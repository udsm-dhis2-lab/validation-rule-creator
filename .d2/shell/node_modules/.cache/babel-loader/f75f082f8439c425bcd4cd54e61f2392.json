{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport { layers } from '@dhis2/ui-constants';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useState, useContext } from 'react';\nimport { createPortal } from 'react-dom';\nconst LayerContext = /*#__PURE__*/createContext({\n  node: document.body,\n  level: 0\n});\n\nconst useLayerContext = () => useContext(LayerContext);\n\nconst createClickHandler = onClick => event => {\n  // don't respond to clicks that originated in the children\n  if (onClick && event.target === event.currentTarget) {\n    onClick({}, event);\n  }\n};\n/**\n * @module\n * @param {Layer.PropTypes} props\n * @returns {React.Component}\n * @example import {     } from @dhis2/ui-core\n * @see Live demo: {@link /demo/?path=/story/component-widget-layer--default|Storybook}\n */\n\n\nconst Layer = ({\n  children,\n  className,\n  dataTest,\n  level,\n  onClick,\n  position,\n  translucent\n}) => {\n  const parentLayer = useLayerContext();\n  const [layerEl, setLayerEl] = useState(null);\n  const nextLayer = {\n    node: layerEl,\n    level: Math.max(parentLayer.level, level)\n  };\n  const portalNode = level > parentLayer.level ? document.body : parentLayer.node;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    ref: setLayerEl,\n    \"data-test\": dataTest,\n    onClick: createClickHandler(onClick),\n    className: \"jsx-3270755513 \" + _JSXStyle.dynamic([[\"1492615244\", [level]]]) + \" \" + (cx('layer', className, position, \"level-\".concat(level), {\n      translucent\n    }) || \"\")\n  }, layerEl && /*#__PURE__*/React.createElement(LayerContext.Provider, {\n    value: nextLayer\n  }, children), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1492615244\",\n    dynamic: [level]\n  }, [\"div.__jsx-style-dynamic-selector{z-index:\".concat(level, \";}\")]), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3270755513\"\n  }, [\"div.jsx-3270755513{top:0;left:0;min-height:100vh;min-width:100vw;}\", \"div.fixed.jsx-3270755513{position:fixed;height:100vh;width:100vw;}\", \"div.absolute.jsx-3270755513{position:absolute;height:100%;width:100%;}\", \"div.translucent.jsx-3270755513{background-color:rgba(33,43,54,0.4);}\"])), portalNode));\n};\n\nLayer.defaultProps = {\n  position: 'fixed',\n  dataTest: 'dhis2-uicore-layer',\n  level: layers.applicationTop\n};\n/**\n * @typedef {Object} PropTypes\n * @static\n * @prop {string} [className]\n * @prop {Node} [children]\n * @prop {string} [dataTest=dhis2-uicore-layer]\n * @prop {number} [level=layers.applicationTop]\n * @prop {boolean} [translucent] - When true a semi-transparent background is added\n * @prop {function} [onClick]\n */\n\nLayer.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n\n  /** Z-index level */\n  level: PropTypes.number,\n  position: PropTypes.oneOf(['absolute', 'fixed']),\n\n  /** Adds a semi-transparent background */\n  translucent: PropTypes.bool,\n\n  /** Click handler */\n  onClick: PropTypes.func\n};\nexport { Layer, useLayerContext };","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/ui/node_modules/@dhis2/ui-core/build/es/Layer/Layer.js"],"names":["_JSXStyle","layers","cx","PropTypes","React","createContext","useState","useContext","createPortal","LayerContext","node","document","body","level","useLayerContext","createClickHandler","onClick","event","target","currentTarget","Layer","children","className","dataTest","position","translucent","parentLayer","layerEl","setLayerEl","nextLayer","Math","max","portalNode","createElement","Fragment","ref","dynamic","concat","Provider","value","id","defaultProps","applicationTop","propTypes","string","number","oneOf","bool","func"],"mappings":"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","sourcesContent":["import _JSXStyle from \"styled-jsx/style\";\nimport { layers } from '@dhis2/ui-constants';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useState, useContext } from 'react';\nimport { createPortal } from 'react-dom';\nconst LayerContext = /*#__PURE__*/createContext({\n  node: document.body,\n  level: 0\n});\n\nconst useLayerContext = () => useContext(LayerContext);\n\nconst createClickHandler = onClick => event => {\n  // don't respond to clicks that originated in the children\n  if (onClick && event.target === event.currentTarget) {\n    onClick({}, event);\n  }\n};\n/**\n * @module\n * @param {Layer.PropTypes} props\n * @returns {React.Component}\n * @example import {     } from @dhis2/ui-core\n * @see Live demo: {@link /demo/?path=/story/component-widget-layer--default|Storybook}\n */\n\n\nconst Layer = ({\n  children,\n  className,\n  dataTest,\n  level,\n  onClick,\n  position,\n  translucent\n}) => {\n  const parentLayer = useLayerContext();\n  const [layerEl, setLayerEl] = useState(null);\n  const nextLayer = {\n    node: layerEl,\n    level: Math.max(parentLayer.level, level)\n  };\n  const portalNode = level > parentLayer.level ? document.body : parentLayer.node;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    ref: setLayerEl,\n    \"data-test\": dataTest,\n    onClick: createClickHandler(onClick),\n    className: \"jsx-3270755513 \" + _JSXStyle.dynamic([[\"1492615244\", [level]]]) + \" \" + (cx('layer', className, position, \"level-\".concat(level), {\n      translucent\n    }) || \"\")\n  }, layerEl && /*#__PURE__*/React.createElement(LayerContext.Provider, {\n    value: nextLayer\n  }, children), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"1492615244\",\n    dynamic: [level]\n  }, [\"div.__jsx-style-dynamic-selector{z-index:\".concat(level, \";}\")]), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3270755513\"\n  }, [\"div.jsx-3270755513{top:0;left:0;min-height:100vh;min-width:100vw;}\", \"div.fixed.jsx-3270755513{position:fixed;height:100vh;width:100vw;}\", \"div.absolute.jsx-3270755513{position:absolute;height:100%;width:100%;}\", \"div.translucent.jsx-3270755513{background-color:rgba(33,43,54,0.4);}\"])), portalNode));\n};\n\nLayer.defaultProps = {\n  position: 'fixed',\n  dataTest: 'dhis2-uicore-layer',\n  level: layers.applicationTop\n};\n/**\n * @typedef {Object} PropTypes\n * @static\n * @prop {string} [className]\n * @prop {Node} [children]\n * @prop {string} [dataTest=dhis2-uicore-layer]\n * @prop {number} [level=layers.applicationTop]\n * @prop {boolean} [translucent] - When true a semi-transparent background is added\n * @prop {function} [onClick]\n */\n\nLayer.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n\n  /** Z-index level */\n  level: PropTypes.number,\n  position: PropTypes.oneOf(['absolute', 'fixed']),\n\n  /** Adds a semi-transparent background */\n  translucent: PropTypes.bool,\n\n  /** Click handler */\n  onClick: PropTypes.func\n};\nexport { Layer, useLayerContext };"]},"metadata":{},"sourceType":"module"}