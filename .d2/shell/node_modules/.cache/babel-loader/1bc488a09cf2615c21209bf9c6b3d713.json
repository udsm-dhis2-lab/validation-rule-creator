{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport { useConfig } from '@dhis2/app-runtime';\nimport propTypes from '@dhis2/prop-types';\nimport { colors, theme } from '@dhis2/ui-constants';\nimport { Card } from '@dhis2/ui-core';\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Settings, Apps as AppsIcon } from '../Icons/index.js';\nimport { InputField } from '../InputField/InputField.js';\nimport i18n from '../locales/index.js';\nimport { joinPath } from './joinPath.js';\nconst appIcon = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"255544020\"\n  }, [\"svg.jsx-255544020{fill:\".concat(colors.white, \";cursor:pointer;height:24px;width:24px;}\")]),\n  className: \"jsx-255544020\"\n};\nconst settingsIcon = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"4285170702\"\n  }, [\"svg.jsx-4285170702{margin:8px 8px 0 16px;color:\".concat(colors.grey900, \";height:24px;width:24px;cursor:pointer;}\")]),\n  className: \"jsx-4285170702\"\n};\n/**\n * Copied from here:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\n */\n\nfunction escapeRegExpCharacters(text) {\n  return text.replace(/[/.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction Search({\n  value,\n  onChange\n}) {\n  const {\n    baseUrl\n  } = useConfig();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(InputField, {\n    value: value,\n    name: \"filter\",\n    placeholder: i18n.t('Search apps'),\n    onChange: onChange,\n    initialFocus: true\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: joinPath(baseUrl, 'dhis-web-menu-management'),\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(Settings, {\n    className: settingsIcon.className\n  }))), settingsIcon.styles, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2764723183\"\n  }, [\"div.jsx-2764723183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;height:52px;margin:8px;}\", \"span.jsx-2764723183{-webkit-flex:1 100%;-ms-flex:1 100%;flex:1 100%;}\", \"span.jsx-2764723183:last-child{-webkit-flex:1 auto;-ms-flex:1 auto;flex:1 auto;}\"]));\n}\n\nSearch.propTypes = {\n  value: propTypes.string.isRequired,\n  onChange: propTypes.func.isRequired\n};\n\nfunction Item({\n  name,\n  path,\n  img\n}) {\n  return /*#__PURE__*/React.createElement(\"a\", {\n    href: path,\n    className: _JSXStyle.dynamic([[\"3670725638\", [theme.primary050]]])\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    alt: \"app logo\",\n    className: _JSXStyle.dynamic([[\"3670725638\", [theme.primary050]]])\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: _JSXStyle.dynamic([[\"3670725638\", [theme.primary050]]])\n  }, name), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3670725638\",\n    dynamic: [theme.primary050]\n  }, [\"a.__jsx-style-dynamic-selector{display:inline-block;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:96px;margin:8px;padding:8px;border-radius:12px;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}\", \"a.__jsx-style-dynamic-selector:hover,a.__jsx-style-dynamic-selector:focus{background-color:\".concat(theme.primary050, \";cursor:pointer;}\"), \"a.__jsx-style-dynamic-selector:hover>div.__jsx-style-dynamic-selector{font-weight:500;cursor:pointer;}\", \"img.__jsx-style-dynamic-selector{width:48px;height:48px;cursor:pointer;}\", \"div.__jsx-style-dynamic-selector{margin-top:14px;color:rgba(0,0,0,0.87);font-size:12px;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;line-height:14px;text-align:center;cursor:pointer;}\"]));\n}\n\nItem.propTypes = {\n  img: propTypes.string,\n  name: propTypes.string,\n  path: propTypes.string\n};\n\nfunction List({\n  apps,\n  filter\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"headerbar-apps-menu-list\",\n    className: \"jsx-2076871745\"\n  }, apps.filter(({\n    displayName,\n    name\n  }) => {\n    const appName = displayName || name;\n    const formattedAppName = appName.toLowerCase();\n    const formattedFilter = escapeRegExpCharacters(filter).toLowerCase();\n    return filter.length > 0 ? formattedAppName.match(formattedFilter) : true;\n  }).map(({\n    displayName,\n    name,\n    defaultAction,\n    icon\n  }, idx) => /*#__PURE__*/React.createElement(Item, {\n    key: \"app-\".concat(name, \"-\").concat(idx),\n    name: displayName || name,\n    path: defaultAction,\n    img: icon\n  })), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2076871745\"\n  }, [\"div.jsx-2076871745{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:30vw;min-width:300px;max-width:560px;min-height:200px;max-height:465px;margin:0 8px 8px 8px;overflow:auto;overflow-x:hidden;}\"]));\n}\n\nList.propTypes = {\n  apps: propTypes.array,\n  filter: propTypes.string\n};\n\nconst AppMenu = ({\n  apps,\n  filter,\n  onFilterChange\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  \"data-test\": \"headerbar-apps-menu\",\n  className: \"jsx-3879001227\"\n}, /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(Search, {\n  value: filter,\n  onChange: onFilterChange\n}), /*#__PURE__*/React.createElement(List, {\n  apps: apps,\n  filter: filter\n})), /*#__PURE__*/React.createElement(_JSXStyle, {\n  id: \"3879001227\"\n}, [\"div.jsx-3879001227{z-index:10000;position:absolute;top:28px;right:-6px;border-top:4px solid transparent;}\"]));\n\nAppMenu.propTypes = {\n  apps: propTypes.array.isRequired,\n  onFilterChange: propTypes.func.isRequired,\n  filter: propTypes.string\n};\n\nconst Apps = ({\n  apps\n}) => {\n  const [show, setShow] = useState(false);\n  const [filter, setFilter] = useState('');\n  const handleVisibilityToggle = useCallback(() => setShow(!show), [show]);\n  const handleFilterChange = useCallback(({\n    value\n  }) => setFilter(value), []);\n  const containerEl = useRef(null);\n  const onDocClick = useCallback(evt => {\n    if (containerEl.current && !containerEl.current.contains(evt.target)) {\n      setShow(false);\n    }\n  }, []);\n  useEffect(() => {\n    document.addEventListener('click', onDocClick);\n    return () => document.removeEventListener('click', onDocClick);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerEl,\n    \"data-test\": \"headerbar-apps\",\n    className: \"jsx-197292304\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleVisibilityToggle,\n    \"data-test\": \"headerbar-apps-icon\",\n    className: \"jsx-197292304\"\n  }, /*#__PURE__*/React.createElement(AppsIcon, {\n    className: appIcon.className\n  })), show ? /*#__PURE__*/React.createElement(AppMenu, {\n    apps: apps,\n    filter: filter,\n    onFilterChange: handleFilterChange\n  }) : null, appIcon.styles, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"197292304\"\n  }, [\"button.jsx-197292304{display:block;background:transparent;padding:0;border:0;}\", \"button.jsx-197292304:focus{outline:1px dotted white;}\", \"div.jsx-197292304{position:relative;width:24px;height:30px;margin:8px 0 0 0;}\"]));\n};\n\nApps.propTypes = {\n  apps: propTypes.array.isRequired\n};\nexport default Apps;","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/ui/node_modules/@dhis2/ui-widgets/build/es/HeaderBar/Apps.js"],"names":["_JSXStyle","useConfig","propTypes","colors","theme","Card","React","useState","useEffect","useCallback","useRef","Settings","Apps","AppsIcon","InputField","i18n","joinPath","appIcon","styles","createElement","id","concat","white","className","settingsIcon","grey900","escapeRegExpCharacters","text","replace","Search","value","onChange","baseUrl","name","placeholder","t","initialFocus","href","string","isRequired","func","Item","path","img","dynamic","primary050","src","alt","List","apps","filter","displayName","appName","formattedAppName","toLowerCase","formattedFilter","length","match","map","defaultAction","icon","idx","key","array","AppMenu","onFilterChange","show","setShow","setFilter","handleVisibilityToggle","handleFilterChange","containerEl","onDocClick","evt","current","contains","target","document","addEventListener","removeEventListener","ref","onClick"],"mappings":"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","sourcesContent":["import _JSXStyle from \"styled-jsx/style\";\nimport { useConfig } from '@dhis2/app-runtime';\nimport propTypes from '@dhis2/prop-types';\nimport { colors, theme } from '@dhis2/ui-constants';\nimport { Card } from '@dhis2/ui-core';\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { Settings, Apps as AppsIcon } from '../Icons/index.js';\nimport { InputField } from '../InputField/InputField.js';\nimport i18n from '../locales/index.js';\nimport { joinPath } from './joinPath.js';\nconst appIcon = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"255544020\"\n  }, [\"svg.jsx-255544020{fill:\".concat(colors.white, \";cursor:pointer;height:24px;width:24px;}\")]),\n  className: \"jsx-255544020\"\n};\nconst settingsIcon = {\n  styles: /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"4285170702\"\n  }, [\"svg.jsx-4285170702{margin:8px 8px 0 16px;color:\".concat(colors.grey900, \";height:24px;width:24px;cursor:pointer;}\")]),\n  className: \"jsx-4285170702\"\n};\n/**\n * Copied from here:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\n */\n\nfunction escapeRegExpCharacters(text) {\n  return text.replace(/[/.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction Search({\n  value,\n  onChange\n}) {\n  const {\n    baseUrl\n  } = useConfig();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(InputField, {\n    value: value,\n    name: \"filter\",\n    placeholder: i18n.t('Search apps'),\n    onChange: onChange,\n    initialFocus: true\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: joinPath(baseUrl, 'dhis-web-menu-management'),\n    className: \"jsx-2764723183\"\n  }, /*#__PURE__*/React.createElement(Settings, {\n    className: settingsIcon.className\n  }))), settingsIcon.styles, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2764723183\"\n  }, [\"div.jsx-2764723183{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;height:52px;margin:8px;}\", \"span.jsx-2764723183{-webkit-flex:1 100%;-ms-flex:1 100%;flex:1 100%;}\", \"span.jsx-2764723183:last-child{-webkit-flex:1 auto;-ms-flex:1 auto;flex:1 auto;}\"]));\n}\n\nSearch.propTypes = {\n  value: propTypes.string.isRequired,\n  onChange: propTypes.func.isRequired\n};\n\nfunction Item({\n  name,\n  path,\n  img\n}) {\n  return /*#__PURE__*/React.createElement(\"a\", {\n    href: path,\n    className: _JSXStyle.dynamic([[\"3670725638\", [theme.primary050]]])\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    alt: \"app logo\",\n    className: _JSXStyle.dynamic([[\"3670725638\", [theme.primary050]]])\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: _JSXStyle.dynamic([[\"3670725638\", [theme.primary050]]])\n  }, name), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3670725638\",\n    dynamic: [theme.primary050]\n  }, [\"a.__jsx-style-dynamic-selector{display:inline-block;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:96px;margin:8px;padding:8px;border-radius:12px;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}\", \"a.__jsx-style-dynamic-selector:hover,a.__jsx-style-dynamic-selector:focus{background-color:\".concat(theme.primary050, \";cursor:pointer;}\"), \"a.__jsx-style-dynamic-selector:hover>div.__jsx-style-dynamic-selector{font-weight:500;cursor:pointer;}\", \"img.__jsx-style-dynamic-selector{width:48px;height:48px;cursor:pointer;}\", \"div.__jsx-style-dynamic-selector{margin-top:14px;color:rgba(0,0,0,0.87);font-size:12px;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;line-height:14px;text-align:center;cursor:pointer;}\"]));\n}\n\nItem.propTypes = {\n  img: propTypes.string,\n  name: propTypes.string,\n  path: propTypes.string\n};\n\nfunction List({\n  apps,\n  filter\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"headerbar-apps-menu-list\",\n    className: \"jsx-2076871745\"\n  }, apps.filter(({\n    displayName,\n    name\n  }) => {\n    const appName = displayName || name;\n    const formattedAppName = appName.toLowerCase();\n    const formattedFilter = escapeRegExpCharacters(filter).toLowerCase();\n    return filter.length > 0 ? formattedAppName.match(formattedFilter) : true;\n  }).map(({\n    displayName,\n    name,\n    defaultAction,\n    icon\n  }, idx) => /*#__PURE__*/React.createElement(Item, {\n    key: \"app-\".concat(name, \"-\").concat(idx),\n    name: displayName || name,\n    path: defaultAction,\n    img: icon\n  })), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"2076871745\"\n  }, [\"div.jsx-2076871745{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;width:30vw;min-width:300px;max-width:560px;min-height:200px;max-height:465px;margin:0 8px 8px 8px;overflow:auto;overflow-x:hidden;}\"]));\n}\n\nList.propTypes = {\n  apps: propTypes.array,\n  filter: propTypes.string\n};\n\nconst AppMenu = ({\n  apps,\n  filter,\n  onFilterChange\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  \"data-test\": \"headerbar-apps-menu\",\n  className: \"jsx-3879001227\"\n}, /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(Search, {\n  value: filter,\n  onChange: onFilterChange\n}), /*#__PURE__*/React.createElement(List, {\n  apps: apps,\n  filter: filter\n})), /*#__PURE__*/React.createElement(_JSXStyle, {\n  id: \"3879001227\"\n}, [\"div.jsx-3879001227{z-index:10000;position:absolute;top:28px;right:-6px;border-top:4px solid transparent;}\"]));\n\nAppMenu.propTypes = {\n  apps: propTypes.array.isRequired,\n  onFilterChange: propTypes.func.isRequired,\n  filter: propTypes.string\n};\n\nconst Apps = ({\n  apps\n}) => {\n  const [show, setShow] = useState(false);\n  const [filter, setFilter] = useState('');\n  const handleVisibilityToggle = useCallback(() => setShow(!show), [show]);\n  const handleFilterChange = useCallback(({\n    value\n  }) => setFilter(value), []);\n  const containerEl = useRef(null);\n  const onDocClick = useCallback(evt => {\n    if (containerEl.current && !containerEl.current.contains(evt.target)) {\n      setShow(false);\n    }\n  }, []);\n  useEffect(() => {\n    document.addEventListener('click', onDocClick);\n    return () => document.removeEventListener('click', onDocClick);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerEl,\n    \"data-test\": \"headerbar-apps\",\n    className: \"jsx-197292304\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleVisibilityToggle,\n    \"data-test\": \"headerbar-apps-icon\",\n    className: \"jsx-197292304\"\n  }, /*#__PURE__*/React.createElement(AppsIcon, {\n    className: appIcon.className\n  })), show ? /*#__PURE__*/React.createElement(AppMenu, {\n    apps: apps,\n    filter: filter,\n    onFilterChange: handleFilterChange\n  }) : null, appIcon.styles, /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"197292304\"\n  }, [\"button.jsx-197292304{display:block;background:transparent;padding:0;border:0;}\", \"button.jsx-197292304:focus{outline:1px dotted white;}\", \"div.jsx-197292304{position:relative;width:24px;height:30px;margin:8px 0 0 0;}\"]));\n};\n\nApps.propTypes = {\n  apps: propTypes.array.isRequired\n};\nexport default Apps;"]},"metadata":{},"sourceType":"module"}