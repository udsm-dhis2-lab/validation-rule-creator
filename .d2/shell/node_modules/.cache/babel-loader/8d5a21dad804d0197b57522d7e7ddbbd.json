{"ast":null,"code":"import i18n from '@dhis2/d2-i18n';\nimport moment from 'moment';\nimport { useState, useEffect } from 'react';\ni18n.setDefaultNamespace('default');\n\nconst simplifyLocale = locale => {\n  const idx = locale.indexOf('-');\n\n  if (idx === -1) {\n    return locale;\n  }\n\n  return locale.substr(0, idx);\n};\n\nconst setGlobalLocale = locale => {\n  if (locale !== 'en' && locale !== 'en-us') {\n    import(\n    /* webpackChunkName: \"moment-locales/[request]\" */\n    \"moment/locale/\".concat(locale)).catch(() => {\n      /* ignore */\n    });\n  }\n\n  moment.locale(locale);\n  const simplifiedLocale = simplifyLocale(locale);\n  i18n.changeLanguage(simplifiedLocale);\n};\n\nexport const useLocale = locale => {\n  const [result, setResult] = useState(undefined);\n  useEffect(() => {\n    if (!locale) {\n      return;\n    }\n\n    setGlobalLocale(locale);\n    setResult(locale);\n  }, [locale]);\n  return result;\n};","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/app-shell/node_modules/@dhis2/app-adapter/build/es/utils/useLocale.js"],"names":["i18n","moment","useState","useEffect","setDefaultNamespace","simplifyLocale","locale","idx","indexOf","substr","setGlobalLocale","concat","catch","simplifiedLocale","changeLanguage","useLocale","result","setResult","undefined"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,gBAAjB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACAH,IAAI,CAACI,mBAAL,CAAyB,SAAzB;;AAEA,MAAMC,cAAc,GAAGC,MAAM,IAAI;AAC/B,QAAMC,GAAG,GAAGD,MAAM,CAACE,OAAP,CAAe,GAAf,CAAZ;;AAEA,MAAID,GAAG,KAAK,CAAC,CAAb,EAAgB;AACd,WAAOD,MAAP;AACD;;AAED,SAAOA,MAAM,CAACG,MAAP,CAAc,CAAd,EAAiBF,GAAjB,CAAP;AACD,CARD;;AAUA,MAAMG,eAAe,GAAGJ,MAAM,IAAI;AAChC,MAAIA,MAAM,KAAK,IAAX,IAAmBA,MAAM,KAAK,OAAlC,EAA2C;AACzC;AACA;AACA,qBAAiBK,MAAjB,CAAwBL,MAAxB,CAFA,EAEiCM,KAFjC,CAEuC,MAAM;AAC3C;AACD,KAJD;AAKD;;AAEDX,EAAAA,MAAM,CAACK,MAAP,CAAcA,MAAd;AACA,QAAMO,gBAAgB,GAAGR,cAAc,CAACC,MAAD,CAAvC;AACAN,EAAAA,IAAI,CAACc,cAAL,CAAoBD,gBAApB;AACD,CAZD;;AAcA,OAAO,MAAME,SAAS,GAAGT,MAAM,IAAI;AACjC,QAAM,CAACU,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAACgB,SAAD,CAApC;AACAf,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACG,MAAL,EAAa;AACX;AACD;;AAEDI,IAAAA,eAAe,CAACJ,MAAD,CAAf;AACAW,IAAAA,SAAS,CAACX,MAAD,CAAT;AACD,GAPQ,EAON,CAACA,MAAD,CAPM,CAAT;AAQA,SAAOU,MAAP;AACD,CAXM","sourcesContent":["import i18n from '@dhis2/d2-i18n';\nimport moment from 'moment';\nimport { useState, useEffect } from 'react';\ni18n.setDefaultNamespace('default');\n\nconst simplifyLocale = locale => {\n  const idx = locale.indexOf('-');\n\n  if (idx === -1) {\n    return locale;\n  }\n\n  return locale.substr(0, idx);\n};\n\nconst setGlobalLocale = locale => {\n  if (locale !== 'en' && locale !== 'en-us') {\n    import(\n    /* webpackChunkName: \"moment-locales/[request]\" */\n    \"moment/locale/\".concat(locale)).catch(() => {\n      /* ignore */\n    });\n  }\n\n  moment.locale(locale);\n  const simplifiedLocale = simplifyLocale(locale);\n  i18n.changeLanguage(simplifiedLocale);\n};\n\nexport const useLocale = locale => {\n  const [result, setResult] = useState(undefined);\n  useEffect(() => {\n    if (!locale) {\n      return;\n    }\n\n    setGlobalLocale(locale);\n    setResult(locale);\n  }, [locale]);\n  return result;\n};"]},"metadata":{},"sourceType":"module"}