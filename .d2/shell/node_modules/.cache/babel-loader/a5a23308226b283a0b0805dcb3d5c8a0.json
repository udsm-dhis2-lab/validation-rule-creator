{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport propTypes from '@dhis2/prop-types';\nimport React, { Component } from 'react';\nimport { FilterInput } from '../Select/FilterInput.js';\nimport { NoMatch } from '../Select/NoMatch.js';\nimport { filterIgnored, checkIfValidOption } from '../Select/option-helpers.js';\nexport class FilterableMenu extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      filter: ''\n    });\n\n    _defineProperty(this, \"onFilterChange\", ({\n      value\n    }) => {\n      this.setState({\n        filter: value\n      });\n    });\n  }\n\n  render() {\n    const {\n      dataTest,\n      options,\n      onChange,\n      selected,\n      empty,\n      handleClose,\n      handleFocusInput,\n      placeholder,\n      noMatchText,\n      Menu\n    } = this.props;\n    const {\n      filter\n    } = this.state;\n    const menuProps = {\n      onChange,\n      selected,\n      empty,\n      handleClose,\n      handleFocusInput,\n      dataTest\n    };\n    const renderedOptions = filterIgnored(options); // If there are no options or there's no filter, just pass everything through\n\n    if (React.Children.count(renderedOptions) === 0 || !filter) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FilterInput, {\n        dataTest: \"\".concat(dataTest, \"-filterinput\"),\n        placeholder: placeholder,\n        value: filter,\n        onChange: this.onFilterChange\n      }), /*#__PURE__*/React.createElement(Menu, _extends({}, menuProps, {\n        options: options\n      })));\n    }\n\n    const filtered = React.Children.map(options, child => {\n      const isValidOption = checkIfValidOption(child); // Filter it out if it's an invalid option\n\n      if (!isValidOption) {\n        return null;\n      }\n\n      const {\n        label\n      } = child.props; // Filter by label, because that's the part of an option that's displayed to the user\n\n      const match = label.toLowerCase().includes(filter.toLowerCase());\n      return match ? child : null;\n    });\n    const hasMatch = React.Children.count(filtered) > 0;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FilterInput, {\n      dataTest: \"\".concat(dataTest, \"-filterinput\"),\n      placeholder: placeholder,\n      value: filter,\n      onChange: this.onFilterChange\n    }), hasMatch ? /*#__PURE__*/React.createElement(Menu, _extends({}, menuProps, {\n      options: filtered\n    })) : /*#__PURE__*/React.createElement(NoMatch, {\n      message: noMatchText\n    }));\n  }\n\n}\nFilterableMenu.propTypes = {\n  Menu: propTypes.elementType.isRequired,\n  dataTest: propTypes.string.isRequired,\n  noMatchText: propTypes.string.isRequired,\n  selected: propTypes.oneOfType([propTypes.string, propTypes.arrayOf(propTypes.string)]).isRequired,\n  empty: propTypes.node,\n  handleClose: propTypes.func,\n  handleFocusInput: propTypes.func,\n  options: propTypes.node,\n  placeholder: propTypes.string,\n  onChange: propTypes.func\n};","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/ui/node_modules/@dhis2/ui-core/build/es/Select/FilterableMenu.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","propTypes","React","Component","FilterInput","NoMatch","filterIgnored","checkIfValidOption","FilterableMenu","constructor","args","filter","setState","render","dataTest","options","onChange","selected","empty","handleClose","handleFocusInput","placeholder","noMatchText","Menu","props","state","menuProps","renderedOptions","Children","count","createElement","Fragment","concat","onFilterChange","filtered","map","child","isValidOption","label","match","toLowerCase","includes","hasMatch","message","elementType","isRequired","string","oneOfType","arrayOf","node","func"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport propTypes from '@dhis2/prop-types';\nimport React, { Component } from 'react';\nimport { FilterInput } from '../Select/FilterInput.js';\nimport { NoMatch } from '../Select/NoMatch.js';\nimport { filterIgnored, checkIfValidOption } from '../Select/option-helpers.js';\nexport class FilterableMenu extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      filter: ''\n    });\n\n    _defineProperty(this, \"onFilterChange\", ({\n      value\n    }) => {\n      this.setState({\n        filter: value\n      });\n    });\n  }\n\n  render() {\n    const {\n      dataTest,\n      options,\n      onChange,\n      selected,\n      empty,\n      handleClose,\n      handleFocusInput,\n      placeholder,\n      noMatchText,\n      Menu\n    } = this.props;\n    const {\n      filter\n    } = this.state;\n    const menuProps = {\n      onChange,\n      selected,\n      empty,\n      handleClose,\n      handleFocusInput,\n      dataTest\n    };\n    const renderedOptions = filterIgnored(options); // If there are no options or there's no filter, just pass everything through\n\n    if (React.Children.count(renderedOptions) === 0 || !filter) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FilterInput, {\n        dataTest: \"\".concat(dataTest, \"-filterinput\"),\n        placeholder: placeholder,\n        value: filter,\n        onChange: this.onFilterChange\n      }), /*#__PURE__*/React.createElement(Menu, _extends({}, menuProps, {\n        options: options\n      })));\n    }\n\n    const filtered = React.Children.map(options, child => {\n      const isValidOption = checkIfValidOption(child); // Filter it out if it's an invalid option\n\n      if (!isValidOption) {\n        return null;\n      }\n\n      const {\n        label\n      } = child.props; // Filter by label, because that's the part of an option that's displayed to the user\n\n      const match = label.toLowerCase().includes(filter.toLowerCase());\n      return match ? child : null;\n    });\n    const hasMatch = React.Children.count(filtered) > 0;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FilterInput, {\n      dataTest: \"\".concat(dataTest, \"-filterinput\"),\n      placeholder: placeholder,\n      value: filter,\n      onChange: this.onFilterChange\n    }), hasMatch ? /*#__PURE__*/React.createElement(Menu, _extends({}, menuProps, {\n      options: filtered\n    })) : /*#__PURE__*/React.createElement(NoMatch, {\n      message: noMatchText\n    }));\n  }\n\n}\nFilterableMenu.propTypes = {\n  Menu: propTypes.elementType.isRequired,\n  dataTest: propTypes.string.isRequired,\n  noMatchText: propTypes.string.isRequired,\n  selected: propTypes.oneOfType([propTypes.string, propTypes.arrayOf(propTypes.string)]).isRequired,\n  empty: propTypes.node,\n  handleClose: propTypes.func,\n  handleFocusInput: propTypes.func,\n  options: propTypes.node,\n  placeholder: propTypes.string,\n  onChange: propTypes.func\n};"]},"metadata":{},"sourceType":"module"}