{"ast":null,"code":"import i18n from '../locales/index.js';\nimport { isEmpty, isString, isNumeric } from './helpers/index.js';\n/*\n * There were some problems with the server side implementation\n * of how international phone numbers are validated, and the\n * server side implementation will likely be removed, see:\n * https://jira.dhis2.org/browse/DHIS2-8040\n *\n * So, rather than aligning with the server-side implementation\n * this validator implements the E.164 numbering plan, see:\n * https://www.cm.com/blog/how-to-format-international-telephone-numbers/\n *\n * SPECS\n * Here's how the E.164 numbering plan works:\n * - A telephone number can have a maximum of 15 digits\n * - The first part of the telephone number is the country code (one to three digits)\n * - The second part is the national destination code (NDC)\n * - The last part is the subscriber number (SN)\n * - The NDC and SN together are collectively called the national (significant) number\n *\n * IMPLEMENTATION ADVICE\n * Two important things to note: First of all, in the international E.164 notation a\n * leading ‘0’ is removed. The UK mobile phone number ‘07911 123456’ in international\n * format is ‘+44 7911 123456’, so without the first zero. Secondly in the E.164 notation\n * all spaces, dashes [‘-‘] and parentheses [ ‘(‘ and ‘)’] are removed, besides the\n * leading ‘+’ all characters should be numeric.\n */\n\nconst invalidInternationalPhoneNumberMessage = i18n.t('Please provide a valid international phone number.');\n\nconst internationalPhoneNumber = value => {\n  // allow empty values\n  if (isEmpty(value)) {\n    return undefined;\n  } // value must be a string\n\n\n  if (!isString(value)) {\n    return invalidInternationalPhoneNumberMessage;\n  }\n\n  const cleanedValue = value // strip all hyphens, dots, spaces\n  .replace(/[-. )(]/g, '') // trim leading zeroes and plus signs\n  .replace(/^[0+]+/, '');\n  return isNumeric(cleanedValue) && cleanedValue.length <= 15 ? undefined : invalidInternationalPhoneNumberMessage;\n};\n\nexport { internationalPhoneNumber, invalidInternationalPhoneNumberMessage };","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/ui/node_modules/@dhis2/ui-forms/build/es/validators/internationalPhoneNumber.js"],"names":["i18n","isEmpty","isString","isNumeric","invalidInternationalPhoneNumberMessage","t","internationalPhoneNumber","value","undefined","cleanedValue","replace","length"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,qBAAjB;AACA,SAASC,OAAT,EAAkBC,QAAlB,EAA4BC,SAA5B,QAA6C,oBAA7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,sCAAsC,GAAGJ,IAAI,CAACK,CAAL,CAAO,oDAAP,CAA/C;;AAEA,MAAMC,wBAAwB,GAAGC,KAAK,IAAI;AACxC;AACA,MAAIN,OAAO,CAACM,KAAD,CAAX,EAAoB;AAClB,WAAOC,SAAP;AACD,GAJuC,CAItC;;;AAGF,MAAI,CAACN,QAAQ,CAACK,KAAD,CAAb,EAAsB;AACpB,WAAOH,sCAAP;AACD;;AAED,QAAMK,YAAY,GAAGF,KAAK,CAAC;AAAD,GACzBG,OADoB,CACZ,UADY,EACA,EADA,EACI;AADJ,GAEpBA,OAFoB,CAEZ,QAFY,EAEF,EAFE,CAArB;AAGA,SAAOP,SAAS,CAACM,YAAD,CAAT,IAA2BA,YAAY,CAACE,MAAb,IAAuB,EAAlD,GAAuDH,SAAvD,GAAmEJ,sCAA1E;AACD,CAfD;;AAiBA,SAASE,wBAAT,EAAmCF,sCAAnC","sourcesContent":["import i18n from '../locales/index.js';\nimport { isEmpty, isString, isNumeric } from './helpers/index.js';\n/*\n * There were some problems with the server side implementation\n * of how international phone numbers are validated, and the\n * server side implementation will likely be removed, see:\n * https://jira.dhis2.org/browse/DHIS2-8040\n *\n * So, rather than aligning with the server-side implementation\n * this validator implements the E.164 numbering plan, see:\n * https://www.cm.com/blog/how-to-format-international-telephone-numbers/\n *\n * SPECS\n * Here's how the E.164 numbering plan works:\n * - A telephone number can have a maximum of 15 digits\n * - The first part of the telephone number is the country code (one to three digits)\n * - The second part is the national destination code (NDC)\n * - The last part is the subscriber number (SN)\n * - The NDC and SN together are collectively called the national (significant) number\n *\n * IMPLEMENTATION ADVICE\n * Two important things to note: First of all, in the international E.164 notation a\n * leading ‘0’ is removed. The UK mobile phone number ‘07911 123456’ in international\n * format is ‘+44 7911 123456’, so without the first zero. Secondly in the E.164 notation\n * all spaces, dashes [‘-‘] and parentheses [ ‘(‘ and ‘)’] are removed, besides the\n * leading ‘+’ all characters should be numeric.\n */\n\nconst invalidInternationalPhoneNumberMessage = i18n.t('Please provide a valid international phone number.');\n\nconst internationalPhoneNumber = value => {\n  // allow empty values\n  if (isEmpty(value)) {\n    return undefined;\n  } // value must be a string\n\n\n  if (!isString(value)) {\n    return invalidInternationalPhoneNumberMessage;\n  }\n\n  const cleanedValue = value // strip all hyphens, dots, spaces\n  .replace(/[-. )(]/g, '') // trim leading zeroes and plus signs\n  .replace(/^[0+]+/, '');\n  return isNumeric(cleanedValue) && cleanedValue.length <= 15 ? undefined : invalidInternationalPhoneNumberMessage;\n};\n\nexport { internationalPhoneNumber, invalidInternationalPhoneNumberMessage };"]},"metadata":{},"sourceType":"module"}