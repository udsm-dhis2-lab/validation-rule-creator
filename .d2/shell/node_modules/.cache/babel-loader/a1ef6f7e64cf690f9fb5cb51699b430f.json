{"ast":null,"code":"import { useEffect, useState } from 'react';\n/**\n * @param {Object} args\n * @param {string} args.path\n * @param {string} [args.errorMessage]\n * @param {string} [args.autoExpandLoadingError]\n * @param {string[]} args.expanded\n * @param {Function} [args.onExpand]\n * @param {Function} [args.onCollapse]\n * @returns {Object}\n */\n\nexport const useOpenState = ({\n  path,\n  expanded,\n  onExpand,\n  onCollapse,\n  errorMessage,\n  autoExpandLoadingError\n}) => {\n  const autoExpand = autoExpandLoadingError && !!errorMessage;\n  const [openedOnceDueToError, setOpenedOnce] = useState(!!errorMessage);\n  const [open, setOpen] = useState(autoExpand || expanded.includes(path));\n  useEffect(() => {\n    if (autoExpand && !openedOnceDueToError) {\n      setOpen(true);\n      setOpenedOnce(true);\n    }\n  }, [autoExpand, openedOnceDueToError]);\n\n  const onToggleOpen = () => {\n    const newOpen = !open;\n    const payload = {\n      path\n    };\n    setOpen(newOpen);\n\n    if (onExpand && newOpen) {\n      onExpand(payload);\n    } else if (onCollapse && !newOpen) {\n      onCollapse(payload);\n    }\n  };\n\n  return {\n    open,\n    onToggleOpen\n  };\n};","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/ui/node_modules/@dhis2/ui-widgets/build/es/OrganisationUnitTree/useOpenState.js"],"names":["useEffect","useState","useOpenState","path","expanded","onExpand","onCollapse","errorMessage","autoExpandLoadingError","autoExpand","openedOnceDueToError","setOpenedOnce","open","setOpen","includes","onToggleOpen","newOpen","payload"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAC3BC,EAAAA,IAD2B;AAE3BC,EAAAA,QAF2B;AAG3BC,EAAAA,QAH2B;AAI3BC,EAAAA,UAJ2B;AAK3BC,EAAAA,YAL2B;AAM3BC,EAAAA;AAN2B,CAAD,KAOtB;AACJ,QAAMC,UAAU,GAAGD,sBAAsB,IAAI,CAAC,CAACD,YAA/C;AACA,QAAM,CAACG,oBAAD,EAAuBC,aAAvB,IAAwCV,QAAQ,CAAC,CAAC,CAACM,YAAH,CAAtD;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAACQ,UAAU,IAAIL,QAAQ,CAACU,QAAT,CAAkBX,IAAlB,CAAf,CAAhC;AACAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,UAAU,IAAI,CAACC,oBAAnB,EAAyC;AACvCG,MAAAA,OAAO,CAAC,IAAD,CAAP;AACAF,MAAAA,aAAa,CAAC,IAAD,CAAb;AACD;AACF,GALQ,EAKN,CAACF,UAAD,EAAaC,oBAAb,CALM,CAAT;;AAOA,QAAMK,YAAY,GAAG,MAAM;AACzB,UAAMC,OAAO,GAAG,CAACJ,IAAjB;AACA,UAAMK,OAAO,GAAG;AACdd,MAAAA;AADc,KAAhB;AAGAU,IAAAA,OAAO,CAACG,OAAD,CAAP;;AAEA,QAAIX,QAAQ,IAAIW,OAAhB,EAAyB;AACvBX,MAAAA,QAAQ,CAACY,OAAD,CAAR;AACD,KAFD,MAEO,IAAIX,UAAU,IAAI,CAACU,OAAnB,EAA4B;AACjCV,MAAAA,UAAU,CAACW,OAAD,CAAV;AACD;AACF,GAZD;;AAcA,SAAO;AACLL,IAAAA,IADK;AAELG,IAAAA;AAFK,GAAP;AAID,CApCM","sourcesContent":["import { useEffect, useState } from 'react';\n/**\n * @param {Object} args\n * @param {string} args.path\n * @param {string} [args.errorMessage]\n * @param {string} [args.autoExpandLoadingError]\n * @param {string[]} args.expanded\n * @param {Function} [args.onExpand]\n * @param {Function} [args.onCollapse]\n * @returns {Object}\n */\n\nexport const useOpenState = ({\n  path,\n  expanded,\n  onExpand,\n  onCollapse,\n  errorMessage,\n  autoExpandLoadingError\n}) => {\n  const autoExpand = autoExpandLoadingError && !!errorMessage;\n  const [openedOnceDueToError, setOpenedOnce] = useState(!!errorMessage);\n  const [open, setOpen] = useState(autoExpand || expanded.includes(path));\n  useEffect(() => {\n    if (autoExpand && !openedOnceDueToError) {\n      setOpen(true);\n      setOpenedOnce(true);\n    }\n  }, [autoExpand, openedOnceDueToError]);\n\n  const onToggleOpen = () => {\n    const newOpen = !open;\n    const payload = {\n      path\n    };\n    setOpen(newOpen);\n\n    if (onExpand && newOpen) {\n      onExpand(payload);\n    } else if (onCollapse && !newOpen) {\n      onCollapse(payload);\n    }\n  };\n\n  return {\n    open,\n    onToggleOpen\n  };\n};"]},"metadata":{},"sourceType":"module"}