{"ast":null,"code":"var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\n\nimport baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\nimport ResourceStore from './ResourceStore.js';\nimport Translator from './Translator.js';\nimport LanguageUtils from './LanguageUtils.js';\nimport PluralResolver from './PluralResolver.js';\nimport Interpolator from './Interpolator.js';\nimport BackendConnector from './BackendConnector.js';\nimport CacheConnector from './CacheConnector.js';\nimport { get as getDefaults, transformOptions } from './defaults.js';\nimport postProcessor from './postProcessor.js';\n\nfunction noop() {}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  function I18n() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments[1];\n\n    _classCallCheck(this, I18n);\n\n    var _this = _possibleConstructorReturn(this, _EventEmitter.call(this));\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      var _ret; // https://github.com/i18next/i18next/issues/879\n\n\n      if (!_this.options.initImmediate) return _ret = _this.init(options, callback), _possibleConstructorReturn(_this, _ret);\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  I18n.prototype.init = function init() {\n    var _this2 = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments[1];\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.options = _extends({}, getDefaults(), this.options, transformOptions(options));\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n\n    function createClassOnDemand(ClassOrObject) {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    } // init services\n\n\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n\n      var lu = new LanguageUtils(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n      var s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.resourceStore.on('added removed', function (lng, ns) {\n        s.cacheConnector.save();\n      });\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        compatibilityJSON: this.options.compatibilityJSON,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix\n      });\n      s.interpolator = new Interpolator(this.options);\n      s.backendConnector = new BackendConnector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options); // pipe events from backendConnector\n\n      s.backendConnector.on('*', function (event) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        _this2.emit.apply(_this2, [event].concat(args));\n      });\n      s.backendConnector.on('loaded', function (loaded) {\n        s.cacheConnector.save();\n      });\n      s.cacheConnector = new CacheConnector(createClassOnDemand(this.modules.cache), s.resourceStore, s, this.options); // pipe events from backendConnector\n\n      s.cacheConnector.on('*', function (event) {\n        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        _this2.emit.apply(_this2, [event].concat(args));\n      });\n\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        s.languageDetector.init(s, this.options.detection, this.options);\n      }\n\n      this.translator = new Translator(this.services, this.options); // pipe events from translator\n\n      this.translator.on('*', function (event) {\n        for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n          args[_key3 - 1] = arguments[_key3];\n        }\n\n        _this2.emit.apply(_this2, [event].concat(args));\n      });\n      this.modules.external.forEach(function (m) {\n        if (m.init) m.init(_this2);\n      });\n    } // append api\n\n\n    var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle'];\n    storeApi.forEach(function (fcName) {\n      _this2[fcName] = function () {\n        var _store;\n\n        return (_store = _this2.store)[fcName].apply(_store, arguments);\n      };\n    });\n\n    var load = function load() {\n      _this2.changeLanguage(_this2.options.lng, function (err, t) {\n        _this2.isInitialized = true;\n\n        _this2.logger.log('initialized', _this2.options);\n\n        _this2.emit('initialized', _this2.options);\n\n        callback(err, t);\n      });\n    };\n\n    if (this.options.resources || !this.options.initImmediate) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n\n    return this;\n  };\n  /* eslint consistent-return: 0 */\n\n\n  I18n.prototype.loadResources = function loadResources() {\n    var _this3 = this;\n\n    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n\n    if (!this.options.resources) {\n      if (this.language && this.language.toLowerCase() === 'cimode') return callback(); // avoid loading resources for cimode\n\n      var toLoad = [];\n\n      var append = function append(lng) {\n        if (!lng) return;\n\n        var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n        lngs.forEach(function (l) {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n\n      if (!this.language) {\n        // at least load fallbacks in this case\n        var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(function (l) {\n          return append(l);\n        });\n      } else {\n        append(this.language);\n      }\n\n      if (this.options.preload) {\n        this.options.preload.forEach(function (l) {\n          return append(l);\n        });\n      }\n\n      this.services.cacheConnector.load(toLoad, this.options.ns, function () {\n        _this3.services.backendConnector.load(toLoad, _this3.options.ns, callback);\n      });\n    } else {\n      callback(null);\n    }\n  };\n\n  I18n.prototype.reloadResources = function reloadResources(lngs, ns) {\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    this.services.backendConnector.reload(lngs, ns);\n  };\n\n  I18n.prototype.use = function use(module) {\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n\n    if (module.type === 'cache') {\n      this.modules.cache = module;\n    }\n\n    if (module.type === 'logger' || module.log && module.warn && module.error) {\n      this.modules.logger = module;\n    }\n\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n\n    return this;\n  };\n\n  I18n.prototype.changeLanguage = function changeLanguage(lng, callback) {\n    var _this4 = this;\n\n    var done = function done(err, l) {\n      _this4.translator.changeLanguage(l);\n\n      if (l) {\n        _this4.emit('languageChanged', l);\n\n        _this4.logger.log('languageChanged', l);\n      }\n\n      if (callback) callback(err, function () {\n        return _this4.t.apply(_this4, arguments);\n      });\n    };\n\n    var setLng = function setLng(l) {\n      if (l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n        if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n      }\n\n      _this4.loadResources(function (err) {\n        done(err, l);\n      });\n    };\n\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      this.services.languageDetector.detect(setLng);\n    } else {\n      setLng(lng);\n    }\n  };\n\n  I18n.prototype.getFixedT = function getFixedT(lng, ns) {\n    var _this5 = this;\n\n    var fixedT = function fixedT(key, opts) {\n      for (var _len4 = arguments.length, rest = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n        rest[_key4 - 2] = arguments[_key4];\n      }\n\n      var options = _extends({}, opts);\n\n      if ((typeof opts === 'undefined' ? 'undefined' : _typeof(opts)) !== 'object') {\n        options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      }\n\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n      return _this5.t(key, options);\n    };\n\n    if (typeof lng === 'string') {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n\n    fixedT.ns = ns;\n    return fixedT;\n  };\n\n  I18n.prototype.t = function t() {\n    var _translator;\n\n    return this.translator && (_translator = this.translator).translate.apply(_translator, arguments);\n  };\n\n  I18n.prototype.exists = function exists() {\n    var _translator2;\n\n    return this.translator && (_translator2 = this.translator).exists.apply(_translator2, arguments);\n  };\n\n  I18n.prototype.setDefaultNamespace = function setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  };\n\n  I18n.prototype.loadNamespaces = function loadNamespaces(ns, callback) {\n    var _this6 = this;\n\n    if (!this.options.ns) return callback && callback();\n    if (typeof ns === 'string') ns = [ns];\n    ns.forEach(function (n) {\n      if (_this6.options.ns.indexOf(n) < 0) _this6.options.ns.push(n);\n    });\n    this.loadResources(callback);\n  };\n\n  I18n.prototype.loadLanguages = function loadLanguages(lngs, callback) {\n    if (typeof lngs === 'string') lngs = [lngs];\n    var preloaded = this.options.preload || [];\n    var newLngs = lngs.filter(function (lng) {\n      return preloaded.indexOf(lng) < 0;\n    }); // Exit early if all given languages are already preloaded\n\n    if (!newLngs.length) return callback();\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(callback);\n  };\n\n  I18n.prototype.dir = function dir(lng) {\n    if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;\n    if (!lng) return 'rtl';\n    var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];\n    return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';\n  };\n  /* eslint class-methods-use-this: 0 */\n\n\n  I18n.prototype.createInstance = function createInstance() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments[1];\n    return new I18n(options, callback);\n  };\n\n  I18n.prototype.cloneInstance = function cloneInstance() {\n    var _this7 = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n    var mergedOptions = _extends({}, this.options, options, {\n      isClone: true\n    });\n\n    var clone = new I18n(mergedOptions);\n    var membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(function (m) {\n      clone[m] = _this7[m];\n    });\n    clone.translator = new Translator(clone.services, clone.options);\n    clone.translator.on('*', function (event) {\n      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      clone.emit.apply(clone, [event].concat(args));\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = clone.options; // sync options\n\n    return clone;\n  };\n\n  return I18n;\n}(EventEmitter);\n\nexport default new I18n();","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/d2-i18n/node_modules/i18next/dist/es/i18next.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","_defaults","defaults","keys","getOwnPropertyNames","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","enumerable","writable","setPrototypeOf","baseLogger","EventEmitter","ResourceStore","Translator","LanguageUtils","PluralResolver","Interpolator","BackendConnector","CacheConnector","get","getDefaults","transformOptions","postProcessor","noop","I18n","_EventEmitter","options","callback","_this","services","logger","modules","external","isInitialized","isClone","_ret","initImmediate","init","setTimeout","_this2","format","interpolation","createClassOnDemand","ClassOrObject","lu","store","resources","s","resourceStore","on","lng","ns","cacheConnector","save","languageUtils","pluralResolver","prepend","pluralSeparator","compatibilityJSON","simplifyPluralSuffix","interpolator","backendConnector","backend","event","_len","args","Array","_key","emit","apply","concat","loaded","cache","_len2","_key2","languageDetector","detection","translator","_len3","_key3","forEach","m","storeApi","fcName","_store","load","changeLanguage","err","t","log","loadResources","_this3","language","toLowerCase","toLoad","append","lngs","toResolveHierarchy","l","indexOf","push","fallbacks","getFallbackCodes","fallbackLng","preload","reloadResources","languages","reload","use","module","type","warn","error","addPostProcessor","_this4","done","setLng","cacheUserLanguage","async","detect","getFixedT","_this5","fixedT","opts","_len4","rest","_key4","overloadTranslationOptionHandler","_translator","translate","exists","_translator2","setDefaultNamespace","defaultNS","loadNamespaces","_this6","n","loadLanguages","preloaded","newLngs","filter","dir","rtlLngs","getLanguagePartFromCode","createInstance","cloneInstance","_this7","mergedOptions","clone","membersToCopy","_len5","_key5"],"mappings":"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","sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nimport baseLogger from './logger.js';\nimport EventEmitter from './EventEmitter.js';\nimport ResourceStore from './ResourceStore.js';\nimport Translator from './Translator.js';\nimport LanguageUtils from './LanguageUtils.js';\nimport PluralResolver from './PluralResolver.js';\nimport Interpolator from './Interpolator.js';\nimport BackendConnector from './BackendConnector.js';\nimport CacheConnector from './CacheConnector.js';\nimport { get as getDefaults, transformOptions } from './defaults.js';\nimport postProcessor from './postProcessor.js';\n\nfunction noop() {}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  function I18n() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments[1];\n\n    _classCallCheck(this, I18n);\n\n    var _this = _possibleConstructorReturn(this, _EventEmitter.call(this));\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = { external: [] };\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      var _ret;\n\n      // https://github.com/i18next/i18next/issues/879\n      if (!_this.options.initImmediate) return _ret = _this.init(options, callback), _possibleConstructorReturn(_this, _ret);\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n    return _this;\n  }\n\n  I18n.prototype.init = function init() {\n    var _this2 = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments[1];\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    this.options = _extends({}, getDefaults(), this.options, transformOptions(options));\n\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n\n    function createClassOnDemand(ClassOrObject) {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    }\n\n    // init services\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n\n      var lu = new LanguageUtils(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n\n      var s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.resourceStore.on('added removed', function (lng, ns) {\n        s.cacheConnector.save();\n      });\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, { prepend: this.options.pluralSeparator, compatibilityJSON: this.options.compatibilityJSON, simplifyPluralSuffix: this.options.simplifyPluralSuffix });\n      s.interpolator = new Interpolator(this.options);\n\n      s.backendConnector = new BackendConnector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n      // pipe events from backendConnector\n      s.backendConnector.on('*', function (event) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        _this2.emit.apply(_this2, [event].concat(args));\n      });\n\n      s.backendConnector.on('loaded', function (loaded) {\n        s.cacheConnector.save();\n      });\n\n      s.cacheConnector = new CacheConnector(createClassOnDemand(this.modules.cache), s.resourceStore, s, this.options);\n      // pipe events from backendConnector\n      s.cacheConnector.on('*', function (event) {\n        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        _this2.emit.apply(_this2, [event].concat(args));\n      });\n\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        s.languageDetector.init(s, this.options.detection, this.options);\n      }\n\n      this.translator = new Translator(this.services, this.options);\n      // pipe events from translator\n      this.translator.on('*', function (event) {\n        for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n          args[_key3 - 1] = arguments[_key3];\n        }\n\n        _this2.emit.apply(_this2, [event].concat(args));\n      });\n\n      this.modules.external.forEach(function (m) {\n        if (m.init) m.init(_this2);\n      });\n    }\n\n    // append api\n    var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle'];\n    storeApi.forEach(function (fcName) {\n      _this2[fcName] = function () {\n        var _store;\n\n        return (_store = _this2.store)[fcName].apply(_store, arguments);\n      };\n    });\n\n    var load = function load() {\n      _this2.changeLanguage(_this2.options.lng, function (err, t) {\n        _this2.isInitialized = true;\n        _this2.logger.log('initialized', _this2.options);\n        _this2.emit('initialized', _this2.options);\n\n        callback(err, t);\n      });\n    };\n\n    if (this.options.resources || !this.options.initImmediate) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n\n    return this;\n  };\n\n  /* eslint consistent-return: 0 */\n\n\n  I18n.prototype.loadResources = function loadResources() {\n    var _this3 = this;\n\n    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;\n\n    if (!this.options.resources) {\n      if (this.language && this.language.toLowerCase() === 'cimode') return callback(); // avoid loading resources for cimode\n\n      var toLoad = [];\n\n      var append = function append(lng) {\n        if (!lng) return;\n        var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(function (l) {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n\n      if (!this.language) {\n        // at least load fallbacks in this case\n        var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(function (l) {\n          return append(l);\n        });\n      } else {\n        append(this.language);\n      }\n\n      if (this.options.preload) {\n        this.options.preload.forEach(function (l) {\n          return append(l);\n        });\n      }\n\n      this.services.cacheConnector.load(toLoad, this.options.ns, function () {\n        _this3.services.backendConnector.load(toLoad, _this3.options.ns, callback);\n      });\n    } else {\n      callback(null);\n    }\n  };\n\n  I18n.prototype.reloadResources = function reloadResources(lngs, ns) {\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    this.services.backendConnector.reload(lngs, ns);\n  };\n\n  I18n.prototype.use = function use(module) {\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n\n    if (module.type === 'cache') {\n      this.modules.cache = module;\n    }\n\n    if (module.type === 'logger' || module.log && module.warn && module.error) {\n      this.modules.logger = module;\n    }\n\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n\n    return this;\n  };\n\n  I18n.prototype.changeLanguage = function changeLanguage(lng, callback) {\n    var _this4 = this;\n\n    var done = function done(err, l) {\n      _this4.translator.changeLanguage(l);\n\n      if (l) {\n        _this4.emit('languageChanged', l);\n        _this4.logger.log('languageChanged', l);\n      }\n\n      if (callback) callback(err, function () {\n        return _this4.t.apply(_this4, arguments);\n      });\n    };\n\n    var setLng = function setLng(l) {\n      if (l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n\n        if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n      }\n\n      _this4.loadResources(function (err) {\n        done(err, l);\n      });\n    };\n\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      this.services.languageDetector.detect(setLng);\n    } else {\n      setLng(lng);\n    }\n  };\n\n  I18n.prototype.getFixedT = function getFixedT(lng, ns) {\n    var _this5 = this;\n\n    var fixedT = function fixedT(key, opts) {\n      for (var _len4 = arguments.length, rest = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n        rest[_key4 - 2] = arguments[_key4];\n      }\n\n      var options = _extends({}, opts);\n      if ((typeof opts === 'undefined' ? 'undefined' : _typeof(opts)) !== 'object') {\n        options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      }\n\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n      return _this5.t(key, options);\n    };\n    if (typeof lng === 'string') {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    return fixedT;\n  };\n\n  I18n.prototype.t = function t() {\n    var _translator;\n\n    return this.translator && (_translator = this.translator).translate.apply(_translator, arguments);\n  };\n\n  I18n.prototype.exists = function exists() {\n    var _translator2;\n\n    return this.translator && (_translator2 = this.translator).exists.apply(_translator2, arguments);\n  };\n\n  I18n.prototype.setDefaultNamespace = function setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  };\n\n  I18n.prototype.loadNamespaces = function loadNamespaces(ns, callback) {\n    var _this6 = this;\n\n    if (!this.options.ns) return callback && callback();\n    if (typeof ns === 'string') ns = [ns];\n\n    ns.forEach(function (n) {\n      if (_this6.options.ns.indexOf(n) < 0) _this6.options.ns.push(n);\n    });\n\n    this.loadResources(callback);\n  };\n\n  I18n.prototype.loadLanguages = function loadLanguages(lngs, callback) {\n    if (typeof lngs === 'string') lngs = [lngs];\n    var preloaded = this.options.preload || [];\n\n    var newLngs = lngs.filter(function (lng) {\n      return preloaded.indexOf(lng) < 0;\n    });\n    // Exit early if all given languages are already preloaded\n    if (!newLngs.length) return callback();\n\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(callback);\n  };\n\n  I18n.prototype.dir = function dir(lng) {\n    if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;\n    if (!lng) return 'rtl';\n\n    var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];\n\n    return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';\n  };\n\n  /* eslint class-methods-use-this: 0 */\n\n\n  I18n.prototype.createInstance = function createInstance() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments[1];\n\n    return new I18n(options, callback);\n  };\n\n  I18n.prototype.cloneInstance = function cloneInstance() {\n    var _this7 = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n    var mergedOptions = _extends({}, this.options, options, { isClone: true });\n    var clone = new I18n(mergedOptions);\n    var membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(function (m) {\n      clone[m] = _this7[m];\n    });\n    clone.translator = new Translator(clone.services, clone.options);\n    clone.translator.on('*', function (event) {\n      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n        args[_key5 - 1] = arguments[_key5];\n      }\n\n      clone.emit.apply(clone, [event].concat(args));\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = clone.options; // sync options\n\n    return clone;\n  };\n\n  return I18n;\n}(EventEmitter);\n\nexport default new I18n();"]},"metadata":{},"sourceType":"module"}