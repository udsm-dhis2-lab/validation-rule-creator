{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nexport class CustomDataLink {\n  constructor(customData, {\n    failOnMiss = true,\n    loadForever = false\n  } = {}) {\n    _defineProperty(this, \"failOnMiss\", void 0);\n\n    _defineProperty(this, \"loadForever\", void 0);\n\n    _defineProperty(this, \"data\", void 0);\n\n    this.data = customData;\n    this.failOnMiss = failOnMiss;\n    this.loadForever = loadForever;\n  }\n\n  async executeResourceQuery(type, query, options) {\n    if (this.loadForever) {\n      return new Promise(() => undefined);\n    }\n\n    const customResource = this.data[query.resource];\n\n    if (!customResource) {\n      if (this.failOnMiss) {\n        throw new Error(\"No data provided for resource type \".concat(query.resource, \"!\"));\n      }\n\n      return Promise.resolve(null);\n    }\n\n    switch (typeof customResource) {\n      case 'string':\n      case 'number':\n      case 'boolean':\n      case 'object':\n        return customResource;\n\n      case 'function':\n        {\n          const result = await customResource(type, query, options);\n\n          if (typeof result === 'undefined' && this.failOnMiss) {\n            throw new Error(\"The custom function for resource \".concat(query.resource, \" must always return a value but returned \").concat(result));\n          }\n\n          return result || null;\n        }\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/app-service-data/build/es/links/CustomDataLink.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","CustomDataLink","constructor","customData","failOnMiss","loadForever","data","executeResourceQuery","type","query","options","Promise","undefined","customResource","resource","Error","concat","resolve","result"],"mappings":"AAAA,SAASA,eAAT,CAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCC,KAAnC,EAA0C;AAAE,MAAID,GAAG,IAAID,GAAX,EAAgB;AAAEG,IAAAA,MAAM,CAACC,cAAP,CAAsBJ,GAAtB,EAA2BC,GAA3B,EAAgC;AAAEC,MAAAA,KAAK,EAAEA,KAAT;AAAgBG,MAAAA,UAAU,EAAE,IAA5B;AAAkCC,MAAAA,YAAY,EAAE,IAAhD;AAAsDC,MAAAA,QAAQ,EAAE;AAAhE,KAAhC;AAA0G,GAA5H,MAAkI;AAAEP,IAAAA,GAAG,CAACC,GAAD,CAAH,GAAWC,KAAX;AAAmB;;AAAC,SAAOF,GAAP;AAAa;;AAEjN,OAAO,MAAMQ,cAAN,CAAqB;AAC1BC,EAAAA,WAAW,CAACC,UAAD,EAAa;AACtBC,IAAAA,UAAU,GAAG,IADS;AAEtBC,IAAAA,WAAW,GAAG;AAFQ,MAGpB,EAHO,EAGH;AACNb,IAAAA,eAAe,CAAC,IAAD,EAAO,YAAP,EAAqB,KAAK,CAA1B,CAAf;;AAEAA,IAAAA,eAAe,CAAC,IAAD,EAAO,aAAP,EAAsB,KAAK,CAA3B,CAAf;;AAEAA,IAAAA,eAAe,CAAC,IAAD,EAAO,MAAP,EAAe,KAAK,CAApB,CAAf;;AAEA,SAAKc,IAAL,GAAYH,UAAZ;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACD;;AAEyB,QAApBE,oBAAoB,CAACC,IAAD,EAAOC,KAAP,EAAcC,OAAd,EAAuB;AAC/C,QAAI,KAAKL,WAAT,EAAsB;AACpB,aAAO,IAAIM,OAAJ,CAAY,MAAMC,SAAlB,CAAP;AACD;;AAED,UAAMC,cAAc,GAAG,KAAKP,IAAL,CAAUG,KAAK,CAACK,QAAhB,CAAvB;;AAEA,QAAI,CAACD,cAAL,EAAqB;AACnB,UAAI,KAAKT,UAAT,EAAqB;AACnB,cAAM,IAAIW,KAAJ,CAAU,sCAAsCC,MAAtC,CAA6CP,KAAK,CAACK,QAAnD,EAA6D,GAA7D,CAAV,CAAN;AACD;;AAED,aAAOH,OAAO,CAACM,OAAR,CAAgB,IAAhB,CAAP;AACD;;AAED,YAAQ,OAAOJ,cAAf;AACE,WAAK,QAAL;AACA,WAAK,QAAL;AACA,WAAK,SAAL;AACA,WAAK,QAAL;AACE,eAAOA,cAAP;;AAEF,WAAK,UAAL;AACE;AACE,gBAAMK,MAAM,GAAG,MAAML,cAAc,CAACL,IAAD,EAAOC,KAAP,EAAcC,OAAd,CAAnC;;AAEA,cAAI,OAAOQ,MAAP,KAAkB,WAAlB,IAAiC,KAAKd,UAA1C,EAAsD;AACpD,kBAAM,IAAIW,KAAJ,CAAU,oCAAoCC,MAApC,CAA2CP,KAAK,CAACK,QAAjD,EAA2D,2CAA3D,EAAwGE,MAAxG,CAA+GE,MAA/G,CAAV,CAAN;AACD;;AAED,iBAAOA,MAAM,IAAI,IAAjB;AACD;AAhBL;AAkBD;;AAjDyB","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport class CustomDataLink {\n  constructor(customData, {\n    failOnMiss = true,\n    loadForever = false\n  } = {}) {\n    _defineProperty(this, \"failOnMiss\", void 0);\n\n    _defineProperty(this, \"loadForever\", void 0);\n\n    _defineProperty(this, \"data\", void 0);\n\n    this.data = customData;\n    this.failOnMiss = failOnMiss;\n    this.loadForever = loadForever;\n  }\n\n  async executeResourceQuery(type, query, options) {\n    if (this.loadForever) {\n      return new Promise(() => undefined);\n    }\n\n    const customResource = this.data[query.resource];\n\n    if (!customResource) {\n      if (this.failOnMiss) {\n        throw new Error(\"No data provided for resource type \".concat(query.resource, \"!\"));\n      }\n\n      return Promise.resolve(null);\n    }\n\n    switch (typeof customResource) {\n      case 'string':\n      case 'number':\n      case 'boolean':\n      case 'object':\n        return customResource;\n\n      case 'function':\n        {\n          const result = await customResource(type, query, options);\n\n          if (typeof result === 'undefined' && this.failOnMiss) {\n            throw new Error(\"The custom function for resource \".concat(query.resource, \" must always return a value but returned \").concat(result));\n          }\n\n          return result || null;\n        }\n    }\n  }\n\n}"]},"metadata":{},"sourceType":"module"}