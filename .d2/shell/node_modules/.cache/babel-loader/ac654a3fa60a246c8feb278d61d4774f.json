{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport styles from './styles/FatalErrorBoundary.style';\nconst translatedErrorHeading = i18n.t('An error occurred in the DHIS2 application.');\n\nconst replaceNewlinesWithBreaks = text => text.split('\\n').reduce((out, line, i) => [...out, line, /*#__PURE__*/React.createElement(\"br\", {\n  key: i\n})], []);\n\nexport class FatalErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"toggleTechInfoDrawer\", () => {\n      this.setState({\n        drawerOpen: !this.state.drawerOpen\n      });\n    });\n\n    this.state = {\n      error: null,\n      errorInfo: null,\n      drawerOpen: false\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error,\n      errorInfo\n    });\n  }\n\n  render() {\n    const {\n      children\n    } = this.props;\n\n    if (this.state.error) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"mask\"\n      }, /*#__PURE__*/React.createElement(_JSXStyle, {\n        id: styles.__hash\n      }, styles), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"message\"\n      }, i18n.t('Something went wrong')), /*#__PURE__*/React.createElement(\"div\", {\n        onClick: () => window.location.reload(),\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"link\"\n      }, i18n.t('Refresh to try again')), /*#__PURE__*/React.createElement(\"div\", {\n        onClick: this.toggleTechInfoDrawer,\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"drawerToggle\"\n      }, this.state.drawerOpen ? i18n.t('Hide technical details') : i18n.t('Show technical details')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + ((this.state.drawerOpen ? 'drawerVisible' : 'drawerHidden') || \"\")\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"errorIntro\"\n      }, translatedErrorHeading, /*#__PURE__*/React.createElement(\"br\", {\n        className: \"jsx-\".concat(styles.__hash)\n      }), i18n.t('The following information may be requested by technical support.')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"errorDetails\"\n      }, [replaceNewlinesWithBreaks(this.state.error.stack + '\\n---' + this.state.errorInfo.componentStack)]))));\n    }\n\n    return children;\n  }\n\n}\nFatalErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired\n};","map":{"version":3,"sources":["/Users/rajabu/.config/yarn/global/node_modules/@dhis2/app-shell/node_modules/@dhis2/app-adapter/build/es/components/FatalErrorBoundary.js"],"names":["_JSXStyle","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","i18n","PropTypes","React","Component","styles","translatedErrorHeading","t","replaceNewlinesWithBreaks","text","split","reduce","out","line","i","createElement","FatalErrorBoundary","constructor","props","setState","drawerOpen","state","error","errorInfo","componentDidCatch","render","children","className","concat","__hash","id","onClick","window","location","reload","toggleTechInfoDrawer","stack","componentStack","propTypes","node","isRequired"],"mappings":"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","sourcesContent":["import _JSXStyle from \"styled-jsx/style\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport styles from './styles/FatalErrorBoundary.style';\nconst translatedErrorHeading = i18n.t('An error occurred in the DHIS2 application.');\n\nconst replaceNewlinesWithBreaks = text => text.split('\\n').reduce((out, line, i) => [...out, line, /*#__PURE__*/React.createElement(\"br\", {\n  key: i\n})], []);\n\nexport class FatalErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"toggleTechInfoDrawer\", () => {\n      this.setState({\n        drawerOpen: !this.state.drawerOpen\n      });\n    });\n\n    this.state = {\n      error: null,\n      errorInfo: null,\n      drawerOpen: false\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error,\n      errorInfo\n    });\n  }\n\n  render() {\n    const {\n      children\n    } = this.props;\n\n    if (this.state.error) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"mask\"\n      }, /*#__PURE__*/React.createElement(_JSXStyle, {\n        id: styles.__hash\n      }, styles), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"container\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"message\"\n      }, i18n.t('Something went wrong')), /*#__PURE__*/React.createElement(\"div\", {\n        onClick: () => window.location.reload(),\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"link\"\n      }, i18n.t('Refresh to try again')), /*#__PURE__*/React.createElement(\"div\", {\n        onClick: this.toggleTechInfoDrawer,\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"drawerToggle\"\n      }, this.state.drawerOpen ? i18n.t('Hide technical details') : i18n.t('Show technical details')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + ((this.state.drawerOpen ? 'drawerVisible' : 'drawerHidden') || \"\")\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"errorIntro\"\n      }, translatedErrorHeading, /*#__PURE__*/React.createElement(\"br\", {\n        className: \"jsx-\".concat(styles.__hash)\n      }), i18n.t('The following information may be requested by technical support.')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"jsx-\".concat(styles.__hash) + \" \" + \"errorDetails\"\n      }, [replaceNewlinesWithBreaks(this.state.error.stack + '\\n---' + this.state.errorInfo.componentStack)]))));\n    }\n\n    return children;\n  }\n\n}\nFatalErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired\n};"]},"metadata":{},"sourceType":"module"}